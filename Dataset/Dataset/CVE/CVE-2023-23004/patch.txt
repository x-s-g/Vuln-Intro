@@ -344,7 +344,7 @@ static int malidp_check_pages_threshold(struct malidp_plane_state *ms,int pgsize)
 		else
 			sgt = obj->funcs->get_sg_table(obj);
 
-		if (!sgt)
+		if (IS_ERR(sgt))
 			return false;
 
 		sgl = sgt->sgl;
